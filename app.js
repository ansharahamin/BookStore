var books = {

  // ************************************
  // üîπ RELIGIOUS CATEGORY
  // ************************************
  religious: {

    Quran: {

    Quran15Lines: {
        name: "AlQuran 15 Lines",
        author: "-",
        description: "Quran with 15 lines per page for easy reading.",
        price: 900,
        src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQKq0BQ0lS1ksOXKHi3lSIvKZ5Fe-oZI9ANHQ&s",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      EngTarjuma: {
        name: "Quran with English Translation",
        author: "Abdullah Yusuf Ali",
        description: "English translation of the Holy Quran.",
        price: 900,
        src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRGx-QaBscXLXNqhqGfaJzMyZPWvgbxWkpNg&s",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      UrduTarjuma: {
        name: "Quran with Urdu Translation",
        author: "Maulana Maududi",
        description: "Urdu translation of the Holy Quran.",
        price: 900,
        src: "https://cdn-ilacfpf.nitrocdn.com/DEIlAFHwOSfAJsIcrIBWieMBreJvfKgy/assets/mobile/source/rev-7d48543/blogger.googleusercontent.com/img/a/AVvXsEjsHBYOfXjgovpy-3d8ff105-vVzO6Z3vg5hYeUxTPlog",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
    },

    

    Hadith: {
      bukhari: {
        name: "Sahih Bukhari",
        author: "Imam Bukhari",
        description: "Most authentic collection of Hadith.",
        price: 2500,
        src: "https://althaqafah.com.pk/cdn/shop/files/44_cf1b89cc-a14e-4923-946a-471492ad3b61.jpg?v=1706707923",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      muslim: {
        name: "Sahih Muslim",
        author: "Imam Muslim",
        description: "One of the most reliable collections of Hadith.",
        price: 2300,
        src: "https://daruttauheed.wordpress.com/wp-content/uploads/2016/05/ttuj.jpg?w=640",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      mishkat: {
        name: "Mishkat-ul-Masabih",
        author: "Imam Tabrizi",
        description: "Famous Hadith compilation used in Islamic studies.",
        price: 1800,
        src: "https://revertmuslimahonlinestore.com/cdn/shop/products/Mishkaat-Ul-Masabih-2-Volumes-Maktaba-tul-Bushra-8_1000x.jpg?v=1652665212",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    },

    Fiqh: {
      behishtiZewar: {
        name: "Behishti Zewar",
        author: "Maulana Ashraf Ali Thanvi",
        description: "Popular Hanafi Fiqh book specially for daily issues.",
        price: 850,
        src: "https://quranwahadith.com/wp-content/uploads/2019/08/Bahishti-Zewar-Urdu.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      quduri: {
        name: "Mukhtasar al-Quduri",
        author: "Imam Quduri",
        description: "Classical Hanafi jurisprudence text.",
        price: 950,
        src: "https://kitaabun.com/shopping3/images/Mukhtasar200924Quduri-1.jpeg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      hidaya: {
        name: "Al-Hidaya",
        author: "Burhan al-Din al-Marghinani",
        description: "Advanced level Hanafi Fiqh reference.",
        price: 3000,
        src: "https://theislamshop.com/storage/82020865_Al-Hidayah%20[Complete%20Set%20in%208%20Volumes]%20-%20Arabic.%201.png",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    },

    IslamicStories: {
      QasasUlAmbiya: {
        name: "Qasas-ul-Ambiya",
        author: "Ibn Kathir",
        description: "Stories of the Prophets.",
        price: 1200,
        src: "https://newbooksnbooks.pk/cdn/shop/files/Qasas_Ul_Anbiya_-_by_Maulana_Akhtar_Hijazi.png?v=1738827227",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      QasasulQuran: {
        name: "Qasas-ul-Quran",
        author: "Hafiz Syed Abul Hasan",
        description: "Stories mentioned in the Quran.",
        price: 950,
        src: "https://rabiabooks.com/wp-content/uploads/2020/09/1987-Qasas-ul-Quran-Title-2016.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      SabaqAmozKahaniya: {
        name: "Sabaq Amoz Kahaniyan",
        author: "Islami Taleem Writer",
        description: "Islamic moral stories for children.",
        price: 550,
        src: "https://kitaabnow.com/wp-content/uploads/2022/05/978-969-37-1148-6-Kitaabnow.com_.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    }
  },


  // ************************************
  // üîπ FICTIONAL CATEGORY
  // ************************************
  fictional: {
    Adventure: {
      book1: {
        name: "Lost in the Mountains",
        author: "Adeel Hashmi",
        description: "Adventure story full of thrill and excitement.",
        price: 600,
        src: "https://upload.wikimedia.org/wikipedia/en/thumb/b/b9/Lost_on_a_mountain_in_maine.jpg/250px-Lost_on_a_mountain_in_maine.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book2: {
        name: "The Hobbit",
        author: "J.R.R. Tolkien",
        description: "Epic adventure fantasy novel.",
        price: 1100,
        src: "https://m.media-amazon.com/images/I/91b0C2YNSrL.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book3: {
        name: "Treasure Island",
        author: "R.L. Stevenson",
        description: "Classic pirate adventure novel.",
        price: 750,
        src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSq6MwOyLqc-YTjW9eRjqf-iI74dfC69uPiXw&s",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    },

    Romance: {
      book1: {
        name: "Aik Mohabbat Sau Afsanay",
        author: "Ashfaq Ahmed",
        description: "Romantic Urdu literature classic.",
        price: 480,
        src: "https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1472648742i/549937.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book2: {
        name: "Peer-e-Kamil",
        author: "Umera Ahmed",
        description: "Popular romantic Urdu novel.",
        price: 700,
        src: "https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1441831053i/3260388.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book3: {
        name: "Jannat Kay Pattay",
        author: "Nimra Ahmed",
        description: "Romantic & emotional Urdu novel.",
        price: 900,
        src: "https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1373050509i/18163929.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    },

    Thrill: {
      book1: {
        name: "Operation Blue Moon",
        author: "Mazhar Kaleem MA",
        description: "Action‚Äìpacked thrilling novel.",
        price: 650,
        src: "https://cdn.penguin.co.uk/dam-assets/books/9781529160420/9781529160420-jacket-large.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book2: {
        name: "Sherlock Holmes",
        author: "Arthur Conan Doyle",
        description: "Detective mystery thriller.",
        price: 850,
        src: "https://m.media-amazon.com/images/M/MV5BMTg0NjEwNjUxM15BMl5BanBnXkFtZTcwMzk0MjQ5Mg@@._V1_.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book3: {
        name: "Gone Girl",
        author: "Gillian Flynn",
        description: "Psychological thriller novel.",
        price: 1200,
        src: "https://m.media-amazon.com/images/I/81af+MCATTL.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    }
  },


  // ************************************
  // üîπ NON-FICTION CATEGORY
  // ************************************
  NonFiction: {

    // Self-Help
    SelfHelp: {
      book1: {
        name: "Atomic Habits",
        author: "James Clear",
        description: "Book on building better habits.",
        price: 1100,
        src: "https://cdn.shopify.com/s/files/1/0194/2855/files/atomic-habits_600x600.jpg?v=1624825894",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book2: {
        name: "The 7 Habits of Highly Effective People",
        author: "Stephen Covey",
        description: "Guide to personal and professional success.",
        price: 1300,
        src: "https://bookabook.pk/cdn/shop/products/817xk9KvJbL_2b505e5b-be99-47e4-9da2-967e881ba215.jpg?v=1626024360",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book3: {
        name: "Think and Grow Rich",
        author: "Napoleon Hill",
        description: "Mindset and success principles.",
        price: 950,
        src: "https://m.media-amazon.com/images/I/71UypkUjStL.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    },

    // Biography
    Biography: {
      book1: {
        name: "Steve Jobs",
        author: "Walter Isaacson",
        description: "Life story of Apple founder Steve Jobs.",
        price: 1600,
        src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKCITfZFYJ1kUlNHNX8ica_ZmYV8fCOzPqnQ&s",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book2: {
        name: "Long Walk to Freedom",
        author: "Nelson Mandela",
        description: "Autobiography of Nelson Mandela.",
        price: 1400,
        src: "https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1682807746i/144720129.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book3: {
        name: "From Being to Becoming",
        author: "Michelle Obama",
        description: "Living an Authentic and Meaningful Life",
        price: 1500,
        src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTbcP01T5AvNzIWWc2wQ_oD3TXazdw3YQKFWg&s",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    }
  },


  // ************************************
  // üîπ SCIENTIFIC CATEGORY
  // ************************************
  Scientific: {

    physics: {
      book1: {
        name: "Fundamentals of Physics",
        author: "Halliday & Resnick",
        description: "Basic concepts of physics explained clearly.",
        price: 2500,
        src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSo_-Uizc2TXHqT_aeT6XFFz7mfooq4Jqt8Cg&s",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book2: {
        name: "University Physics",
        author: "Young & Freedman",
        description: "Standard physics reference book.",
        price: 2700,
        src: "https://m.media-amazon.com/images/I/81Go7XPI+zL._SL1500_.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book3: {
        name: "Concepts of Physics",
        author: "H.C. Verma",
        description: "Popular physics book for students.",
        price: 1500,
        src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQuStfs1rUaRkQ5RGRyM9Z_39C5tKTCVlMug&s",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    },

    biology: {
      book1: {
        name: "Campbell Biology",
        author: "Neil A. Campbell",
        description: "World-famous reference for biology students.",
        price: 3000,
        src: "https://chemistrydocs.com/wp-content/uploads/2024/04/Campbell-Biology-12th-edition.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      },
      book2: {
        name: "Anatomy & Physiology",
        author: "Elaine N. Marieb",
        description: "Comprehensive guide to human anatomy and physiology.",
        price: 2800,
        src: "https://images-na.ssl-images-amazon.com/images/I/51Z0nLAfLmL._SX379_BO1,204,203,200_.jpg",
        addToCartBtn: "Add toCart",
        likeBtn: "Like"
      },
      book3: {
        name: "Molecular Biology of the Cell",
        author: "Bruce Alberts",
        description: "Advanced book for cell biology.",
        price: 3500,
        src: "https://chemistry.com.pk/wp-content/uploads/2022/01/Molecular-Biology-of-the-Cell-6th-Ed.-By-Alberts-Johnson-Lewis-Morgan-Raff-Roberts-and-Walter.jpg",
        addToCartBtn: "Add to Cart",
        likeBtn: "Like"
      }
    }
  }

};

var allCards = document.getElementById("allCards");

for (let category in books) {
  // category name (religious, fictional, NonFiction, Scientific)
  console.log("CATEGORY:", category);

  for (let subCategory in books[category]) {
    // subcategory name (Quran, Hadith, Adventure, SelfHelp, physics, etc.)
    console.log("  SUBCATEGORY:", subCategory);

    let bookGroup = books[category][subCategory]; // book1, book2, book3 group

    for (let singleBook in bookGroup) {
      let book = bookGroup[singleBook]; // actual book object
      console.log("     BOOK:", book);

      allCards.innerHTML += `
        <div class="col-md-4 d-flex justify-content-evenly">
          <div class="card mb-5" style="width: 18rem;">
              <img height="300px" src="${book.src}" class="card-img-top" alt="">
              <div class="card-body">
                  <h5 class="card-title">${book.name}</h5>
                  <p class="card-text">${book.description}</p>
                  <p class="card-text">Author: ${book.author}</p>
                  <p class="card-text">Price: ${book.price}</p>
                  <a href="#" class="btn btn-danger">${book.addToCartBtn}</a>
              </div>
          </div>
        </div>`;
    }
  }
}
var viewAllBtn = document.getElementById("viewAllBtn");

viewAllBtn.addEventListener("click", function() {
    allCards.innerHTML = ""; // clear previous cards

    for (let category in books) {
        for (let subCategory in books[category]) {
            let bookGroup = books[category][subCategory];
            for (let bookKey in bookGroup) {
                let book = bookGroup[bookKey];
                allCards.innerHTML += `
                    <div class="col-md-4 d-flex justify-content-evenly">
                        <div class="card mb-5" style="width: 18rem;">
                            <img height="300px" src="${book.src}" class="card-img-top" alt="">
                            <div class="card-body">
                                <h5 class="card-title">${book.name}</h5>
                                <p class="card-text">${book.description}</p>
                                <p class="card-text">Author: ${book.author}</p>
                                <p class="card-text">Price: ${book.price}</p>
                                <a href="#" class="btn btn-danger">${book.addToCartBtn}</a>
                            </div>
                        </div>
                    </div>
                `;
            }
        }
    }
});

var allCards = document.getElementById("allCards");
var categoriesEl = document.getElementById("categories");
var subCategoriesEl = document.getElementById("subCategories");

// 1Ô∏è‚É£ Populate sidebar with main categories
for (let category in books) {
    let li = document.createElement("li");
    li.textContent = category;
    li.classList.add("list-group-item", "category-item");
    li.style.cursor = "pointer";
    li.dataset.category = category;
    categoriesEl.appendChild(li);
}

// 2Ô∏è‚É£ When a category is clicked, populate subcategories
categoriesEl.addEventListener("click", function(e) {
    if (e.target && e.target.matches("li.category-item")) {
        let selectedCategory = e.target.dataset.category;

        // Clear previous subcategories
        subCategoriesEl.innerHTML = "";

        for (let sub in books[selectedCategory]) {
            let li = document.createElement("li");
            li.textContent = sub;
            li.classList.add("list-group-item", "subcategory-item");
            li.style.cursor = "pointer";
            li.dataset.category = selectedCategory;
            li.dataset.subcategory = sub;
            subCategoriesEl.appendChild(li);
        }

        // Show all books in selected category
        displayBooks(selectedCategory);
    }
});

// 3Ô∏è‚É£ When subcategory is clicked, filter books
subCategoriesEl.addEventListener("click", function(e) {
    if (e.target && e.target.matches("li.subcategory-item")) {
        let selectedCategory = e.target.dataset.category;
        let selectedSub = e.target.dataset.subcategory;
        displayBooks(selectedCategory, selectedSub);
    }
});

// Function to display books
function displayBooks(category, subCategory = null) {
    allCards.innerHTML = "";

    let subCats = subCategory 
        ? { [subCategory]: books[category][subCategory] }
        : books[category];

    for (let sub in subCats) {
        let bookGroup = subCats[sub];
        for (let bookKey in bookGroup) {
            let book = bookGroup[bookKey];

            allCards.innerHTML += `
                <div class="col-md-4 d-flex justify-content-evenly">
                    <div class="card mb-5" style="width: 18rem;">
                        <img height="300px" src="${book.src}" class="card-img-top" alt="">
                        <div class="card-body">
                            <h5 class="card-title">${book.name}</h5>
                            <p class="card-text">${book.description}</p>
                            <p class="card-text">Author: ${book.author}</p>
                            <p class="card-text">Price: ${book.price}</p>
                            <a href="#" class="btn btn-danger">${book.addToCartBtn}</a>
                        </div>
                    </div>
                </div>
            `;
        }
    }
}
var goTopBtn = document.getElementById("goTopBtn");

// Show button when scrolling down
window.onscroll = function() {
    if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
        goTopBtn.style.display = "block";
    } else {
        goTopBtn.style.display = "none";
    }
};

var searchInput = document.getElementById("searchInput");

searchInput.addEventListener("input", function() {
    var query = searchInput.value.toLowerCase();
    allCards.innerHTML = ""; // Clear existing cards

    for (let category in books) {
        for (let subCategory in books[category]) {
            let bookGroup = books[category][subCategory];
            for (let key in bookGroup) {
                let book = bookGroup[key];
                
                // Match book name or author
                if (book.name.toLowerCase().includes(query) || book.author.toLowerCase().includes(query)) {
                    allCards.innerHTML += `
                        <div class="col-md-4 d-flex justify-content-evenly">
                            <div class="card mb-5" style="width: 18rem;">
                                <img height="300px" src="${book.src}" class="card-img-top" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">${book.name}</h5>
                                    <p class="card-text">${book.description}</p>
                                    <p class="card-text">Author: ${book.author}</p>
                                    <p class="card-text">Price: ${book.price}</p>
                                    <a href="#" class="btn btn-danger">${book.addToCartBtn}</a>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
        }
    }
});


// Scroll to top on click
goTopBtn.addEventListener("click", function() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
});

// Optional: show all books from first category on page load
let firstCategory = Object.keys(books)[0];
displayBooks(firstCategory);
// var viewAllBtn = document.getElementById("viewAllBtn");

// viewAllBtn.addEventListener("click", function(){
//     let allBooks = {};

//     // Loop through every category and subcategory
//     for(let category in books){
//         for(let sub in books[category]){
//             Object.assign(allBooks, books[category][sub]);
//         }
//     }

//     displayBooks(allBooks); // use the same display function
// });
